<html>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
<title>Join game</title>
</head>

<body>

<h1>SUPERGHOST</h1>
<h2>Join {{.GameId}}</h2>
<form id=join-form>
  Enter a username:
  <br><input type=text name=username maxlength=16 pattern="[a-zA-Z0-9]+"
      autocapitalize=none autocorrect=false>
  <input type=submit>
</form>

<!-- listing players here would be nice so players know what names are taken -->
</body>

<script>

const joinForm = document.getElementById("join-form")

joinForm.addEventListener("submit", function(e){
  e.preventDefault() // do not write response to screen
  var xhr = new XMLHttpRequest()
	xhr.onload = function() {
    if (xhr.status == 303) { // "see other"
      location.href = xhr.responseText
    }
	}
  xhr.open("POST", "join")
  xhr.send(new URLSearchParams(new FormData(joinForm)))
})
</script>

</html>
