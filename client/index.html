<html>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
<title>superghost</title>
</head>

<body>


<h1>SUPERGHOST</h1>
<form id=join-form>
  <h2>Join a game:</h2>
  <br><input type="text" name=game-id><input type="submit" value="join">
</form>
<form id=create-game-form>
  <h2>Create a game:</h2><br>
  <label for=max-players>Max players:</label>
  <input type=number id=max-players name=maxPlayers min=2 max=8><br>
  <label for=min-length>Min word length:</label>
  <input type=number id=min-length name=minWordLength min=2 max=45><br>
  <label for=is-public>Publicly visible:</label>
  <input type=checkbox id=is-public name=isPublic><br>
  <input type=submit value=create>
</form>

</body>

<script>

const createGameForm = document.getElementById("create-game-form")

createGameForm.addEventListener("submit", function(e){
  e.preventDefault() // do not write response to screen
  var xhr = new XMLHttpRequest()
	xhr.onload = function() {
    if (xhr.status == 303) { // "see other"
      location.href = xhr.responseText
    }
	}
  xhr.open("POST", "rooms")
  xhr.send(new URLSearchParams(new FormData(createGameForm)))
})
</script>

</html>
